<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>bpx-ai</title>
    <!-- plugins:css -->

    <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendors/feather/feather.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendors/mdi/css/materialdesignicons.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendors/ti-icons/css/themify-icons.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendors/font-awesome/css/font-awesome.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendors/typicons/typicons.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendors/simple-line-icons/css/simple-line-icons.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendors/css/vendor.bundle.base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.css') }}">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/vendors/datatables.net-bs4/dataTables.bootstrap4.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='assets/js/select.dataTables.min.css') }}">
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="{{ url_for('static', filename='assets/css/style.css') }}">
    <!-- endinject -->
    <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.png') }}" />

    <style type="text/css">
      .icon-container {
    display: flex;
    gap: 20px;
    margin: 20px;
}

.icon1,.icon2,.icon3,.icon4 {
    font-size: 24px;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    color: white;
}

.right {
    color: green;display: none;
}

.wrong {
    color: red;display: none;
}

.disabled {
    color: gray;display: none;
  
}
.disabled2 {
    color: yellow;display: none;
    /* Change text color for better contrast */
    opacity: 0.8;

}
#piechartid{height: 180px;}
    </style>
  </head>
  <body class="with-welcome-text">
    <div class="container-scroller">
      <!-- partial -->
      <div class="container-fluid page-body-wrapper" style="padding-top:20px;">
        <!-- partial:partials/_sidebar.html -->
        <nav class="sidebar sidebar-offcanvas" id="sidebar">
          <ul class="nav">
            <li class="nav-item">
              <a class="nav-link" href="index">
                <i class="mdi mdi-grid-large menu-icon"></i>
                <span class="menu-title">Dashboard</span>
              </a>
            </li>
            <li class="nav-item nav-category"></li>
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="menu-icon mdi mdi-floor-plan"></i>
                <span class="menu-title">CC Home</span>
               <!-- <i class="menu-arrow"></i> -->
              </a>
<!--               <div class="collapse" id="ui-basic">
                <ul class="nav flex-column sub-menu">
                  <li class="nav-item"> <a class="nav-link" href="pages/ui-features/buttons.html">Buttons</a></li>
                  <li class="nav-item"> <a class="nav-link" href="pages/ui-features/dropdowns.html">Dropdowns</a></li>
                  <li class="nav-item"> <a class="nav-link" href="pages/ui-features/typography.html">Typography</a></li>
                </ul>
              </div> -->
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/portfolio">
                <i class="menu-icon mdi mdi-card-text-outline"></i>
                <span class="menu-title">Portfolio Overview</span>
                <!-- <i class="menu-arrow"></i> -->
              </a>
  <!--             <div class="collapse" id="form-elements">
                <ul class="nav flex-column sub-menu">
                  <li class="nav-item"><a class="nav-link" href="pages/forms/basic_elements.html">Basic Elements</a></li>
                </ul>
              </div> -->
            </li>
            <li class="nav-item" >
               <a class="nav-link"  href="/financial"> 
                <i class="menu-icon mdi mdi-chart-line"></i>
                <span class="menu-title">Financial Forecast</span>
                <!-- <i class="menu-arrow"></i> -->
              </a>
<!--               <div class="collapse" id="charts">
                <ul class="nav flex-column sub-menu">
                  <li class="nav-item"> <a class="nav-link" href="pages/charts/chartjs.html">ChartJs</a></li>
                </ul>
              </div> -->
            </li>
            <li class="nav-item active" >
              <a class="nav-link" href="/project" >
                <i class="menu-icon mdi mdi-table"></i>
                <span class="menu-title">Project Activity</span>
            <!-- <i class="menu-arrow"></i> -->
              </a>
<!--               <div class="collapse" id="tables">
                <ul class="nav flex-column sub-menu">
                  <li class="nav-item"> <a class="nav-link" href="pages/tables/basic-table.html">Basic table</a></li>
                </ul>
              </div> -->
            </li>

<!--             <li class="nav-item">
              <a class="nav-link" data-bs-toggle="collapse" href="#icons" aria-expanded="false" aria-controls="icons">
                <i class="menu-icon mdi mdi-layers-outline"></i>
                <span class="menu-title">Icons</span>
                <i class="menu-arrow"></i>
              </a>
              <div class="collapse" id="icons">
                <ul class="nav flex-column sub-menu">
                  <li class="nav-item"> <a class="nav-link" href="pages/icons/font-awesome.html">Font Awesome</a></li>
                </ul>
              </div>
            </li> -->
  <!--           <li class="nav-item">
              <a class="nav-link" data-bs-toggle="collapse" href="#auth" aria-expanded="false" aria-controls="auth">
                <i class="menu-icon mdi mdi-account-circle-outline"></i>
                <span class="menu-title">User Pages</span>
                <i class="menu-arrow"></i>
              </a>
              <div class="collapse" id="auth">
                <ul class="nav flex-column sub-menu">
                  <li class="nav-item"> <a class="nav-link" href="pages/samples/blank-page.html"> Blank Page </a></li>
                  <li class="nav-item"> <a class="nav-link" href="pages/samples/error-404.html"> 404 </a></li>
                  <li class="nav-item"> <a class="nav-link" href="pages/samples/error-500.html"> 500 </a></li>
                  <li class="nav-item"> <a class="nav-link" href="pages/samples/login.html"> Login </a></li>
                  <li class="nav-item"> <a class="nav-link" href="pages/samples/register.html"> Register </a></li>
                </ul>
              </div>
            </li> -->
<!--             <li class="nav-item">
              <a class="nav-link" href="docs/documentation.html">
                <i class="menu-icon mdi mdi-file-document"></i>
                <span class="menu-title">Documentation</span>
              </a>
            </li> -->
          </ul>
        </nav>
        <!-- partial -->
        <div class="main-panel">
          <div class="content-wrapper">
            <div class="row">
              <div class="col-sm-12">
                <div class="home-tab">
               <!--   <div class="d-sm-flex align-items-center justify-content-between border-bottom">
                    <ul class="nav nav-tabs" role="tablist">
                      <li class="nav-item">
                        <a class="nav-link active ps-0" id="home-tab" data-bs-toggle="tab" href="#overview" role="tab" aria-controls="overview" aria-selected="true">Overview</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#audiences" role="tab" aria-selected="false">Audiences</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" id="contact-tab" data-bs-toggle="tab" href="#demographics" role="tab" aria-selected="false">Demographics</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link border-0" id="more-tab" data-bs-toggle="tab" href="#more" role="tab" aria-selected="false">More</a>
                      </li>
                    </ul>
                    <div>
                      <div class="btn-wrapper">
                        <a href="#" class="btn btn-otline-dark align-items-center"><i class="icon-share"></i> Share</a>
                        <a href="#" class="btn btn-otline-dark"><i class="icon-printer"></i> Print</a>
                        <a href="#" class="btn btn-primary text-white me-0"><i class="icon-download"></i> Export</a>
                      </div>
                    </div>
                  </div> -->
                  <div class="tab-content tab-content-basic">
                    <div class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview">
                      <div class="row">
                        <div class="col-sm-12">
                          <div class="statistics-details d-flex align-items-center justify-content-between">
                            <div>
                              <label for="cars">Choose a Project:</label>
                                  <select name="project" id="mySelect"  onchange="sendData2()">
                                        {% for x in ids %}
                                       <option value="{{ x }}">{{ x }}</option>
                                        {% endfor %}
                                  </select>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-8 d-flex flex-column">
                          <div class="row flex-grow">
                            <div class="col-12 col-lg-4 col-lg-12 grid-margin stretch-card">
                              <div class="card card-rounded">
                                <div class="card-body">
                                  <div class="d-sm-flex justify-content-between align-items-start">
                                    <div>

                                    </div>
                                    <div id="performanceLine-legend"></div>
                                  </div>
                                  <!-- <div class="chartjs-wrapper mt-4"> -->
                                       <p>Result: <span id="result"></span></p>
                                       <div id="jsondata"></div> 
                                          <div class="icon-container">
                                            <!-- overall -->
                                            <div class="icon1"></div>
                                            
                                               <!-- scope -->
                                            
                                            <div class="icon2"></div>
                                        
                                             <!-- budget -->
                                            
                                          <div class="icon3"></div>
                                            
                                             <!-- schdule -->
                                          <div class="icon4"></div>
                                          </div> 
                                    <!-- <canvas id="performanceLine" width=""></canvas> -->
                                  <!-- </div> -->
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                 
                      </div>
                
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- content-wrapper ends -->
          <!-- partial:partials/_footer.html -->
          <footer class="footer">
            <div class="d-sm-flex justify-content-center justify-content-sm-between">
            </div>
          </footer>
          <!-- partial -->
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <!-- <script src="{{ url_for('static', filename='assets/vendors/js/vendor.bundle.base.js') }}"></script> -->
    <!-- <script src="{{ url_for('static', filename='assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.js') }}"></script> -->
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <!-- <script src="{{ url_for('static', filename='assets/vendors/chart.js/chart.umd.js') }}"></script> -->
    <!-- <script src="{{ url_for('static', filename='assets/vendors/progressbar.js/progressbar.min.js') }}"></script> -->
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <!-- <script src="{{ url_for('static', filename='assets/js/off-canvas.js') }}"></script> -->
<!--     <script src="{{ url_for('static', filename='assets/js/template.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/settings.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/hoverable-collapse.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/todolist.js') }}"></script>
     endinject -->
    <!-- Custom js for this page-->
    <script src="{{ url_for('static', filename='assets/js/jquery.cookie.js') }}" type="text/javascript"></script> 
    <script src="{{ url_for('static', filename='assets/js/dashboard.js') }}"></script>
    <!-- <script src="assets/js/Chart.roundedBarCharts.js"></script> -->
    <!-- End custom js for this page-->
    <script type="text/javascript">
    function seticon(overall,scope,schedule,avgbudget)
    {   
     
      var iconElement1 = document.querySelectorAll('.icon1');
      var iconElement2 = document.querySelectorAll('.icon2');
      var iconElement3 = document.querySelectorAll('.icon3');
      var iconElement4 = document.querySelectorAll('.icon4');
      iconElement1.className = 'icon'; // Reset classes
      iconElement1.textContent = ''; // Reset content

            iconElement2.className = 'icon'; // Reset classes
      iconElement2.textContent = ''; // Reset content

            iconElement3.className = 'icon'; // Reset classes
      iconElement3.textContent = ''; // Reset content

            iconElement4.className = 'icon'; // Reset classes
      iconElement4.textContent = ''; // Reset content
      //overall
      if(overall == 4){
        iconElement1[0].classList.add('right');
        iconElement1[0].textContent = '✔'; // Check mark symbol
        }else if(overall == 3){
          iconElement1[0].classList.add('disabled2');
          iconElement1[0].textContent = '🟡'; // Disabled symbol

        }else if(overall <= 2){
          iconElement1[0].classList.add('wrong');
          iconElement1[0].textContent = '✘'; // Cross mark symbol
        }else{ iconElement1[0].classList.add('disabled');
            iconElement1[0].textContent = '⚫'; // Disabled symbol
        }
     //scope 
      if(scope == 1){
        iconElement2[0].classList.add('right');
        iconElement2[0].textContent = '✔'; // Check mark symbol
        }else if(scope == 2){iconElement2[0].classList.add('disabled2');
            iconElement2[0].textContent = '🟡'; // Disabled symbol
        }else if(scope == 3){
          iconElement2[0].classList.add('wrong');
          iconElement2[0].textContent = '✘'; // Cross mark symbol
        }else{ iconElement2[0].classList.add('disabled');
            iconElement2[0].textContent = '⚫'; // Disabled symbol
        } 

     //avg budget
      if((avgbudget) > 0.75){
        iconElement3[0].classList.add('right');
        iconElement3[0].textContent[0] = '✔'; // Check mark symbol
        }else if((avgbudget) > 2){ iconElement3[0].classList.add('disabled2');
            iconElement3[0].textContent = '🟡'; // Disabled symbol
        }else if((avgbudget) <=0.5){iconElement3[0].classList.add('wrong');
            iconElement3[0].textContent = '✘'; // Cross mark symbol
        }else{
          iconElement3[0].classList.add('disabled');
          iconElement3[0].textContent = '⚫'; // Disabled symbol
        }

     //schedule  
      if(schedule > 5){
        iconElement4[0].classList.add('right');
        iconElement4[0].textContent = '✔'; // Check mark symbol
        }else if(schedule <= 5){iconElement4[0].classList.add('disabled2');
            iconElement4[0].textContent = '🟡'; // Disabled symbol
        }else if(schedule < 0){iconElement4[0].classList.add('wrong');
            iconElement4[0].textContent = '✘'; // Cross mark symbol
        }else{
          iconElement4[0].classList.add('disabled');
          iconElement4[0].textContent = '⚫'; // Disabled symbol
        } 


    }

     function sendData2() {
            var data = $('#mySelect').val();
            console.log(data)
            $.ajax({
                url: '/process',
                type: 'GET',
                data: { data: data },
                success: function(response) {
                  $('.icon1').css('display', 'block');
                  $('.icon2').css('display', 'block');
                  $('.icon3').css('display', 'block');
                  $('.icon4').css('display', 'block');
  
                  console.log(response.result)
                    //const iconElements = document.querySelectorAll('.icon');
                    let overall = response.result.overall;
                    let scope = response.result.scope;
                    let schedule = response.result.schedule;
                    let avg_budget = response.result.avg_budget;
                    let accrual_amount = response.result.accrual_amount;
                    console.log(accrual_amount);
                    var result = '<p>Project ID: ' + response.result.Projectid + '</p>';
                    result += '<p>Status: ' + response.result.status + '</p>';
                    result += "<p><img id='piechartid' src=static/"+response.result.img +"/></p>";
                    result += "<p><img id='piechartid' src=static/"+response.result.img2 +"/></p>"
                    $('#result').html(result);
                    seticon(overall,scope,schedule,parseFloat(avg_budget))
                },
                error: function(error) {
                    console.log(error);
                }
            });
        }
    
    </script>
  </body>
</html>